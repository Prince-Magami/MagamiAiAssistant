{% extends 'base.html' %}
{% block title %}Chat - PMAI{% endblock %}
{% block content %}
<div class="chat-wrapper">
  <div class="top-bar">
    <span><strong>{{ user.username if user else "Guest" }}</strong></span>
    <a href="{{ url_for('logout') }}" class="logout-btn">Logout</a>
  </div>

  <div class="language-toggle">
    <label><input type="radio" name="lang" value="English" checked> English</label>
    <label><input type="radio" name="lang" value="Pidgin"> Pidgin</label>
  </div>

  <div class="mode-select">
    <select id="modeSelect">
      <option>Chatbox</option>
      <option>Scam/Email Checker</option>
      <option>Exam/Academic Assistant</option>
      <option>Cybersecurity Advisor</option>
      <option>Business Helper</option>
    </select>
  </div>

  <div id="chat-box">
    {% for msg in messages %}
      <div class="msg"><strong>You:</strong> {{ msg.content }}</div>
      <div class="msg reply"><strong>PMAI:</strong> {{ msg.response }}</div>
    {% endfor %}
  </div>

  <form id="chat-form" method="POST" action="/send">
    <textarea name="prompt" id="user-input" placeholder="Type your message..." rows="2" required></textarea>
    <button class="btn" type="submit">Send</button>
  </form>
</div>

<script>
document.getElementById("chat-form").addEventListener("submit", function(e) {
  const input = document.getElementById("user-input");
  if (input.value.trim() === "") {
    e.preventDefault();
  }
});
</script>
{% endblock %}
